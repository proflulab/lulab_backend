// 组织机构表
model Organization {
  id          String  @id @default(cuid())
  name        String // 组织名称
  code        String  @unique // 组织编码
  description String? // 组织描述
  logo        String? // 组织logo
  parentId    String? // 父组织ID
  level       Int     @default(1) // 组织层级
  sortOrder   Int     @default(0) // 排序
  active      Boolean @default(true) // 是否启用

  // 自关联
  parent   Organization?  @relation("OrganizationHierarchy", fields: [parentId], references: [id], onDelete: Restrict)
  children Organization[] @relation("OrganizationHierarchy")

  // 关联关系
  departments Department[]
  users       UserOrganization[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([parentId])
  @@index([code])
  @@index([active]) // 活跃组织查询
  @@index([parentId, sortOrder]) // 子组织排序查询
  @@map("organizations")
}
