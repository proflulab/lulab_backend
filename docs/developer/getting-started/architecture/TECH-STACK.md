# 技术栈文档

本文档详细介绍了 LuLab 后端项目使用的技术栈，包括后端核心技术、第三方服务集成和现代化开发特性。

## 后端核心技术栈

| 技术 | 版本 | 用途 | 说明 |
|------|------|------|------|
| **Node.js** | 18.x+ | 运行时环境 | 提供高性能的 JavaScript/TypeScript 运行环境 |
| **NestJS** | 10.x | 应用框架 | 基于 TypeScript 的企业级 Node.js 框架，提供模块化架构 |
| **TypeScript** | 5.x | 编程语言 | 提供静态类型检查，增强代码可维护性 |
| **Prisma** | 5.x | ORM 工具 | 类型安全的数据库访问层，提供自动生成的客户端 |
| **PostgreSQL** | 14+ | 关系型数据库 | 主数据库，存储所有业务数据 |
| **Redis** | 7.x | 内存数据库 | 缓存、会话存储和任务队列支持 |
| **Swagger** | 7.x | API 文档 | 自动生成和展示 RESTful API 文档 |
| **Jest** | 29.x | 测试框架 | 单元测试和集成测试框架 |
| **Supertest** | 6.x | API 测试 | HTTP 断言库，用于测试 API 端点 |
| **pnpm** | 8.x | 包管理器 | 高效的磁盘空间利用和依赖管理 |
| **BullMQ** | 4.x | 任务队列 | 基于 Redis 的任务队列系统 |
| **@nestjs/schedule** | 4.x | 任务调度 | 定时任务和 cron 作业支持 |
| **Apollo Server** | 4.x | GraphQL 服务器 | 提供 GraphQL API 能力 |
| **Passport** | 0.6.x | 认证中间件 | 认证策略框架，支持多种认证方式 |
| **bcryptjs** | 2.4.x | 密码加密 | 安全的密码哈希算法 |
| **class-validator** | 0.14.x | 数据验证 | 基于装饰器的数据验证 |
| **class-transformer** | 0.5.x | 数据转换 | 对象转换和序列化工具 |

## 第三方服务集成

| 服务 | 集成方式 | 主要功能 | 用途 |
|------|----------|----------|------|
| **腾讯会议** | Webhook + REST API | 会议事件、录制文件、参会者管理、转写、智能功能 | 接收会议事件，获取录制文件，管理会议数据 |
| **飞书** | REST API + Webhook | 多维表格数据同步、通知消息、应用集成 | 会议数据同步到多维表格，发送通知 |
| **阿里云短信** | REST API | 短信发送、模板管理 | 发送验证码和通知短信 |
| **邮件服务** | SMTP + API | 邮件发送、模板管理 | 发送验证码、通知和系统邮件 |
| **OpenAI** | REST API | AI 文本处理、总结、转录 | 会议内容总结、智能分析 |

## 现代化开发特性

| 特性 | 实现方式 | 优势 |
|------|----------|------|
| **GraphQL 支持** | Apollo Server 集成 | 灵活的数据查询，减少网络请求 |
| **定时任务** | @nestjs/schedule | 自动化任务处理，减少人工干预 |
| **路径别名** | TypeScript 路径映射 | 简化导入路径，提高代码可读性 |
| **TypeScript 严格模式** | tsconfig.json 配置 | 提前发现类型错误，提高代码质量 |
| **队列系统** | BullMQ + Redis | 异步任务处理，提高系统响应能力 |
| **缓存策略** | Redis 集成 | 减少数据库查询，提高系统性能 |
| **API 文档自动化** | Swagger 装饰器 | 实时更新的 API 文档，便于前后端协作 |
| **环境配置管理** | @nestjs/config | 多环境配置支持，提高部署灵活性 |
| **日志系统** | NestJS Logger + Winston | 结构化日志，便于问题排查 |
| **健康检查** | @nestjs/terminus | 系统健康监控，提高系统可靠性 |